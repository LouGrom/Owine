{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block body %}
	<h1>Votre panier</h1>

    {% for company in companies %}
        <div class="mb-4">
        <h3>{{ company.name }}</h3>
        {% for cart in carts %}
            {% if cart.product.seller.company == company %}
            {{ cart.product.appellation.name }} - <input value="{{ cart.quantity }}" type="number"><a class="btn btn-dark"><i class="fas fa-trash"></i></a><br>
            {% endif %}

        {% endfor %}
        </div>
    {% endfor %}

	<table class="table">
		<thead class="thead">
			<tr>
				<th>Client</th>
				<th>Vendeur</th>
				<th>Produit</th>
				<th>Quantité</th>
				<th>Montant total</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% for cart in carts %}
				<tr>
					<td>{{ cart.user.firstname }}
						{{ cart.user.lastname }}
					</td>
					<td>{{ cart.product.seller.firstname }}
						{{ cart.product.seller.lastname }}</td>
					<td>{{ cart.product.appellation.name }}</td>
					<td>{{ cart.quantity }}</td>
					<td>{{ cart.totalAmount }}</td>
					<td>
						<a class="btn btn-dark" href="{{ path('cart_show', {'id': cart.id}) }}">Détails</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="4">no records found</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
